#!/bin/bash

SSID=$1

# Create the monitor interface and bring it up.
sudo iw dev wlan0 interface add mon0 type monitor
sudo ip link set mon0 up

# Wait for the first beacon.
tshark -i mon0 -l -Y "wlan_mgt.ssid == \"$SSID\"" 2>/dev/null | head -1 >/dev/null

# Shut down the monitor and delete it.
sudo ip link set mon0 down
sudo iw dev mon0 del
